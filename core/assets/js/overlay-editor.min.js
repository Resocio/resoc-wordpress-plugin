var rseInitOverlayEditor=function(e,t,a,n){var o,i,r,l=e.find(".rse-image-selection-button"),s=e.find(".rse-overlay-creation-button"),d=e.find(".rse-image-selected-panel");const c=React.createElement,u=e.find(".rse-overlay-editor")[0];ReactDOM.render(c(ResocSocialEditor.StandaloneOverlayEditor,{onCreated:function(e){o=e}}),u),l.on("click",function(e){if(e.preventDefault(),i)return void i.open();i=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1}),i.on("select",function(){attachment=i.state().get("selection").first().toJSON(),imageUrl=attachment.url,o.setImage(imageUrl),r=attachment.id,d.show(),l.removeClass("button-primary"),l.addClass("button-secondary")}),i.open()}),s.on("click",function(e){e.preventDefault();var i=JSON.stringify({image_id:r,image_settings:o.getImageEditionState()}),l={action:a,request:i};s.attr("disabled","disabled"),jQuery.ajax({type:"POST",data:l,dataType:"json",url:t,success:function(e){console.log("DONE",e),tb_remove(),s.removeAttr("disabled"),n&&n(e)},error:function(e,t,a){console.log("Cannot create overlay",e),s.removeAttr("disabled")}})}),console.log("Overlay editor initialized")};