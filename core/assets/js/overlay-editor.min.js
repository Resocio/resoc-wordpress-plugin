var rseInitOverlayEditor=function(e,t,a,n){var i,o,r,l=e.find(".rse-image-selection-button"),s=e.find(".rse-overlay-creation-button"),c=e.find(".rse-image-selected-panel");const d=React.createElement,m=e.find(".rse-overlay-editor")[0];ReactDOM.render(d(ResocSocialEditor.StandaloneOverlayEditor,{onCreated:function(e){i=e}}),m),l.on("click",function(e){if(e.preventDefault(),o)return void o.open();o=wp.media.frames.file_frame=wp.media({multiple:!1,library:{type:"image"}}),o.on("select",function(){attachment=o.state().get("selection").first().toJSON(),imageUrl=attachment.url,i.setImage(imageUrl),r=attachment.id,c.show(),l.removeClass("button-primary"),l.addClass("button-secondary")}),o.open()}),s.on("click",function(e){e.preventDefault();var o=JSON.stringify({image_id:r,image_settings:i.getImageEditionState()}),l={action:a,request:o};s.attr("disabled","disabled"),jQuery.ajax({type:"POST",data:l,dataType:"json",url:t,success:function(e){console.log("DONE",e),tb_remove(),s.removeAttr("disabled"),n&&n(e)},error:function(e,t,a){console.log("Cannot create overlay",e),s.removeAttr("disabled")}})}),console.log("Overlay editor initialized")};